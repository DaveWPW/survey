<!-- Horizontal Form -->
 <div class="box box-info">
      <div class="box-header with-border">
        <h3 class="box-title">问卷编辑页面</h3>
      </div>
      <div>
        <button id="addQues" type="button" onclick="doAddQues()">添加题目</button>
      </div>
      <!-- /.box-header -->
      <!-- form start -->
      <form class="form-horizontal">
        <div class="box-body">
          <div class="form-group">
            <label for="paperName" class="col-sm-2 control-label">问卷标题:</label>
            <div class="col-sm-10">
              <textarea id="paperName" style="width: 80%;height: 30%;"></textarea>
            </div>
          </div>
          <div id="quesDiv"></div>
        </div>
        <!-- /.box-body -->
        <div class="box-footer">
          <button type="button" class="btn btn-default btn-cancel">Cancel</button>
          <button type="button" class="btn btn-info pull-right btn-save">Save</button>
        </div>
        <!-- /.box-footer -->
      </form>
    </div>
<script type="text/javascript" src="bower_components/layer/layer.js"></script>
<script type="text/javascript">
$(document).ready(function(){
	//doInitFormData();
	/* $(".box-footer")
		.on("click", ".btn-cancel", doCancel)
		.on("click", ".btn-save", doAddOrUpdate); */
});
function doAddQues(){
	var optionDiv = $("#addOption");
	doSelectQuesUI()
	/* var divs = 
		"<div class='form-group'>"+
			"<label class='col-sm-2 control-label'>选项:</label>"+
			"<div class='col-sm-10'>"+
				"<input type='text' class='form-control optionContent' style='width: 80%;'>"+
				"<input type='checkbox' class='is-blanks' value='1'>可填空"+
				"<button type='button' style='margin-left: 65%;' onclick='doDeleteOption(this)'>删除</button>"+
			"</div>"+
		"</div>";
	optionDiv.append(divs); */
}
//跳转选择题目操作
function doSelectQuesUI(){
	$("#mainContentId").load("paper/doSelectQuesUI.do");
}





/* function doDeleteOption(btn){
	console.log("doDeleteOption()");
	btn.parentElement.parentElement.remove();
} 
//刷新数据,重定向Quesr页面
function doCancel(){
	$("#mainContentId").removeData("rowData");
	$("#mainContentId").load("ques/doQuesListUI.do");
}
function getQuesData(){
	var options = [];
	$(".optionContent").each(function(){
		if($(this).val() != null){
			options.push($(this).val());
		}
	});
	var flags = [];
	$("#addOption input[type='checkbox").each(function(){
		if($(this).prop("checked")){
			flags.push(1);
		}else{
			flags.push(0);
		}
	});
	var type;
	var title = $(".box-title").html();
	if(title === "添加单选题" || title === "修改单选题"){
		type = "01";
	}else if(title === "添加多选题" || title === "修改多选题"){
		type = "02";
	}else if(title === "添加简答题" || title === "修改简答题"){
		type = "03";
	}
	var params = {
		"options" : options.toString(),
		"flags" : flags.toString(),
		"quesName" : $("#quesName").val(),
		"quesType" : type,
	}
	return params;
}
//添加和修改
function doAddOrUpdate(){
	var rowData = $("#mainContentId").data("rowData");
	var params = getQuesData();
	console.log(params);
	var insertUrl = "ques/doAddQues.do";
	var updateUrl = "ques/doUpdateQues.do";
	if(rowData){
		params.quesId = rowData.quesId;
	}
	console.log(params);
	var url = rowData ? updateUrl : insertUrl;
	$.post(url, params, function(result){
		if(result.state == 1){
			alert(result.message);
			doCancel();
		}else{
			alert(result.message);
		}
	})
}

function doInitFormData(){
	if($(".box-title").html() === "添加简答题" || $(".box-title").html() === "修改简答题"){
		$("#addButton").hide();
	}else{
		$("#addButton").show();
	}
    var data = $("#mainContentId").data("rowData");
    if(!data){
    	return;
    }
	console.log("update");
	//初始化用户信息
	//$('#quesId').attr('disabled','disabled');
	$("#quesName").val(data.quesName);
	for(var i = 0; i < data.options.length; i++){
		doAddOption();
		$(".optionContent").eq(i).val(data.options[i]);
		if(data.flags[i] === 1){
			$("#addOption input[type='checkbox']").eq(i).prop("checked", true);
		}else if(data.flags[i] === 0){
			$("#addOption input[type='checkbox']").eq(i).prop("checked", false);
		}
	}
} */
</script>